---
# ====== 基本標準欄位 ======
title: 音視頻大綱
description: "文章的摘要，用於列表與 SEO。"
authors: yhchen            # 對應 authors.yml
tags: 
  - draft               # 自己挑你定義好的 tag
date: 2025-12-09T06:41:37

# ====== URL 相關 ======
# slug: "/your-custom-url"      # 可選，不寫就自動用檔名產生
# image: "./cover.png"          # 可選，blog 列表預覽圖片
# keywords: ["C++", "Tools"]    # 可選，SEO 補強

# ====== TOC / 分頁控制 ======
hide_table_of_contents: false
toc_min_heading_level: 2
toc_max_heading_level: 4
pagination_prev: null         # 可選，不要上一篇連結
pagination_next: null         # 可選，不要下一篇連結

# ====== Draft / Preview ======
draft: true                  # 可選，true = 不會出現在生產環境

---

音視頻傳輸技術入門預計撰寫大綱

<!-- truncate -->

```yaml
title: "音視頻傳輸技術入門"
description: >
  本書專注現代音視頻開發所需知識，
  內容涵蓋編碼格式、封裝格式、RTP/RTCP、低延遲傳輸協定、
  轉封裝、同步、SFU 架構與實務 debugging。
  所有主題皆為工程實作會遇到的領域，無歷史脈絡。

structure:

  前言:
    - 本書用途與定位（實務導向、跨領域導覽）
    - 適用讀者（後端工程師、串流開發者、多人影音系統開發者）
    - 什麼是音視頻技術鏈（從 frame → codec → 封裝 → 傳輸 → 播放）

  影像&音訊基礎:
    - Frame 與 timestamp
    - Pixel Format（RGB / YUV420）
    - 色彩子取樣（4:2:0）
    - Bit-depth 與 HDR/SDR（僅概念）
    - Frame rate 與 motion smoothness
    - A/V 同步概念（PTS、DTS）
    - Frame duration（20ms, 60ms）
    - Mono / Stereo / Channel layout

  視訊編碼（Codec）概念:
    - 為何需要壓縮（Bandwidth 與延遲）
    - Temporal vs Spatial 壓縮
    - I / P / B frame
    - GOP 與低延遲設定
    - Motion vector 與預測

  現代視訊編碼格式:
    H264:
      - Profile / Level
      - NALU 類型
      - SPS / PPS
      - IDR 與非 IDR
    H265/HEVC:
      - VPS/SPS/PPS
    VP8/VP9:
      - Payload header 結構
      - Keyframe 訊號
    AV1:
      - OBU 結構
      - Layer 概念（日後做 SVC 有用）

  音訊編碼格式:
    - AAC（ADTS / ASC）
    - Opus（SILK / CELT）
    - 音訊封包長度與延遲

  封裝格式（Container + Bitstream）:
    Annex_B:
      - Start Code
      - 為什麼適合串流
    AVCC:
      - length prefix
      - Decoder Configuration Record
    MPEG_TS:
      - PAT / PMT / PES
      - PCR 與 A/V 同步
    MP4 / CMAF:
      - Box 結構
      - fMP4 fragment 行為
    Matroska/WebM:
      - Cluster / Block

  即時傳輸核心（RTP / RTCP）:
    RTP:
      - Header 欄位
      - seq / timestamp 行為
      - SSRC 與 stream identity
      - Marker Bit
      - Payload Type 與根據 codec 的 mapping
    RTP_payload_format:
      H264:
        - STAP-A
        - FU-A Fragmentation
      VP8:
        - payload header
        - keyframe bit
      VP9:
        - payload header / superframe
      AV1:
        - OBU RTP header
    RTCP:
      - SR / RR（同步與統計）
      - NACK（重傳請求）
      - PLI / FIR（請求關鍵幀）
      - TWCC（流量控制）

  網路傳輸與延遲控制:
    - UDP 與即時性
    - jitter source 與 jitter buffer
    - 丟包模型
    - 重傳策略（NACK / ARQ）
    - 延遲來源拆解（encode / buffer / network / decode）

  現代串流協定:
    RTMP:
      - Chunk 與 timestamp 行為
    SRT:
      - ARQ（重傳）
      - 延遲控制
      - payload 行為（任意 bytes）
    HLS / LL-HLS:
      - Segment boundary
      - Low-latency chunk
    DASH:
      - Segment / Adaptation

  Gateway 與轉封裝:
    - Annex B ↔ AVCC 互轉
    - ES ↔ TS 轉換流程
    - TS ↔ fMP4（CMAF）概念
    - RTP 產生器（packetizer）邏輯
    - RTP ↔ raw NALU 還原
    - 音訊／視訊時間重建

  即時系統架構:
    - 上行流（Producer）概念
    - 下行流（Consumer）概念
    - SSRC routing
    - seq 與 timestamp 重寫（per subscriber）
    - NACK buffer 設計
    - PLI 策略與 Keyframe 需求
    - 多訂閱者流量分配
    - Simulcast（Chrome / VP8 / H264）
    - SVC（VP9 / AV1 基本概念）
    - 重建 jitter / buffer 的最小模型

  播放器實務:
    - 解碼 pipeline
    - 抖動緩衝
    - A/V 同步（clock / drift）
    - 常見延遲問題來源

  Debug:
    - Wireshark RTP/RTCP 解析
    - FFmpeg remux / demux 檢查
    - MP4Box 分析
    - RTP payload dump
    - TS / H264 hex dump
    - NALU 邊界偵測
    - “畫面卡住”排查邏輯
    - “音訊超前/落後”排查邏輯
    - “RTP 丟包後畫面異常”排查邏輯

  實務問題:
    - 為何 I-frame 無法解碼（SPS/PPS 遺失）
    - 為何畫面輪廓延遲（B-frame reorder）
    - 為何 TS PCR 飄移
    - 為何 RTP timestamp 不對齊
    - 為何丟包後畫面全壞
    - 為何延遲持續增加
    - 為何 SRT/HLS/RTC 行為差別大

  RFC 與規格索引:
    RTP_core:
      - RFC3550
      - RFC3551
    RTCP_Feedback:
      - RFC4585
      - RFC5760
      - RFC8888
    RTP_Payload:
      - RFC6184 (H264)
      - RFC7798 (H265)
      - RFC7742 (VP8)
      - RFC9308 (AV1)
    Audio:
      - RFC7587 (Opus)
    Container:
      - ISO/IEC 14496-12
      - ISO/IEC 13818-1
      - Matroska Spec
    Streaming:
      - Apple HLS draft
      - SRT technical overview

  附錄:
    - 常用 Hex 樣本（H264/TS/RTP）
    - 名詞對照表（適合查詢）
    - 常用工具清單與使用時機
    - 測試與量測方法（bitrate、RTT、jitter）
```
